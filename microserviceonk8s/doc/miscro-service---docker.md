# docker 化什么意思呢？  
    让服务有一个适合的运行环境， 将服务放在一个容器里，就能运行起来；
    就是有一个基础镜像； 
注意，目前我们的项目有三种语言，python，go，java，由于我本人只会go，java；  
因此，只会准备两种运行环境  
### 下载基础镜像  
    docker pull openjdk:7-jre  
## 服务 docker化时 主要步骤  
- 选择合适的基础镜像  
- 将模块进行打包 


## 将服务docker时，应该了解的几个问题？  
1. 基础镜像的选择？  
    - 基础镜像的大小
    - 基础镜像里系统的版本uname -a 
    - 根据服务的开发语言，来确定基础镜像是否有运行环境？
        - 如是否有java的运行环境 
        - 是否有python的运行环境  
2. 你开发的服务是以怎样的形式运行在镜像里/docker里？  
    - 服务以jar包的方式运行  
    - 服务以二进制的形式运行(如 golang 语言开发)
3. 以docker方式部署服务时，不同模块之间是如何通信的呢？ 
    - 启动模块时(运行服务时) 添加link，设置一个名字就可以了，这样另一个服务就可以通过  
    名字来查询服务  
4. 微服务模式 哪些变量是变化的，那些是不变的？有两大类吧 
    - 微服务之间的通信
        - 如，设置名字来进行通信  
            这些设置后，就不会变化  
        
    - 微服务之外    
        - 如mysql的地址，redis的地址，  
            这些地址，可能是变化的，因此，需要设置变量，  
            通过变量传递给容器
    - 其实，根本原因是，如果某个服务是微服务内的，那就可以设置成名字  
        如果访问的服务不在微服务里，那就设置成变量的形式，如我的微服务里没有开发  
        mysql，redis服务，因此需要设置成变量的形式 
## docker下 是如何通信的？ 
- 直接通过容器IP通信
    - 使用的很少，因为docker的IP很不稳定，重启后会发生变化  
- 服务将端口映射出去，或者说，将容器的端口映射成主机的物理端口 
- docker的link机制，也就是说通过设置的名字来进行访问  
### 微服务下，通过上面的哪种机制比较合适呢？  
- 我们开发的微服务通过link机制来进行通信
- 基础设施服务，或者说公共服务，如mysql，zookeeper，redis 等服务，通过端口映射来实现通信




## docker化时，应该注意的事项？  
1. 经常变换的内容，不能写死到docker镜像里，
    - 如服务地址，不然每次变更都要重新构建服务镜像  
    - 数据库的配置信息(访问地址)，要提出来，不能在application.properties里写死  
2. docker化时，应该选择对其他模块依赖最少的模块，开始 
3. 将基础模块也就是不依赖其他模块，先上传到本地仓库，
    - 注意package与install是不同的，
        - package 仅仅是打包到本项目的target目录下
        - install，打包会安装到本地的maven仓库中，这样其他模块就可以在仓库中，查找到了


## 针对上面的注意事项，如何解决呢？  
1. 以变量的形式，写入，如将数据库的访问地址172.16.91.165改成${mysql.address}  


 